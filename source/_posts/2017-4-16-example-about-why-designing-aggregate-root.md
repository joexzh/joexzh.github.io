---
layout:     post
title:      "几个例子说明为什么要设计 aggregate root"
subtitle:   "about aggregate"
date:       2017-04-16 01:00:00
author:     "Joe"
tags:
    - DDD
categories:
    - [coding]
---

设计 aggregate root 目的是通过 root 修改 aggregate, 也就是提供有限的入口修改 aggregate, 而不是把 aggregate 泄露得遍地都是. 这样做是为了更加贴近现实世界, 并且减少设计的复杂度以节省我们的生命.

---

例如, 房子

你的房子一般只能通过**房门**进入, 进而进行一些'*housework*' (诸如做饭, 睡觉, 看电视, etc). 如果你不限制进入的方法, 会带来很多不必要的麻烦. 从烟囱/窗口/水管等方式进入, 是非常荒谬的, 正如我们以前的很多设计. 你的电视只能**进入**房子之后才能看, 你的床也只能**进入**房子之后才能睡. 否则, 如果你每天把你家的电视和床, 扛到你喜欢的地方, 酒吧, 公司去用, 成本会相当高, 并且不好维护. 而且你的电视和床会处在非常危险的处境. 正如我们的设计, 也应该参考**房子**的设计, 限制领域边界, 封装内部行为.

如果需要将一张床, 从一个房间搬到另一个房间, 在房子里面可以轻易做出这种改动. 因为你知道另一房间在哪里, 然后确定床放在左边靠墙的位置. 如果你想节省时间, 在工作的时候想移动房间, 你雇了一个工人帮你搬床. 但是这个工人不会灵活变通, 他完全不关心你房子的'业务'(布局), 只会执行死命令. 你只能给他一个坐标, 让他把床搬过去. 这是增加业务风险的典型例子: 虽然你节省了时间, 但是如果你提供了错误的坐标, 你的床可能放在不适当的位置, 阳台, 厕所, 甚至卡在承重墙中间(假设工人能满足你任何要求). 为了避免悲剧发生, 你最好亲自回家一趟.